$(document).ready(function(){let t="http://localhost:8080/v1/tasks",a="http://localhost:8080/v1/trello",n=$("[data-datatable-row-template]").children()[0],e=$("[data-tasks-container]");var i={},s={};function o(t){return t.map(function(t){return $("<option>").addClass("crud-select__option").val(t.id).text(t.name||"Unknown name")})}function d(){$.ajax({url:t,method:"GET",contentType:"application/json",success:function(t){t.forEach(t=>{s[t.id]=t}),$.ajax({url:a+"/boards",method:"GET",contentType:"application/json",success:function(a){var s,d;s=t,d=a,e.empty(),d.forEach(t=>{i[t.id]=t}),s.forEach(function(t){var a=function(t){let a=$(n).clone();return a.attr("data-task-id",t.id),a.find("[data-task-name-section] [data-task-name-paragraph]").text(t.title),a.find("[data-task-name-section] [data-task-name-input]").val(t.title),a.find("[data-task-content-section] [data-task-content-paragraph]").text(t.content),a.find("[data-task-content-section] [data-task-content-input]").val(t.content),a}(t),i=o(d);a.find("[data-board-name-select]").append(i),a.appendTo(e)})}})}})}function c(){var t=$(this).parents("[data-task-id]");t.toggleClass("datatable__row--editing");var a=t.find("[data-task-name-paragraph]").text(),n=t.find("[data-task-content-paragraph]").text();t.find("[data-task-name-input]").val(a),t.find("[data-task-content-input]").val(n)}d(),$("[data-task-add-form]").on("submit",function(a){a.preventDefault();var n=$(this).find('[name="title"]').val(),e=$(this).find('[name="content"]').val();$.ajax({url:t,method:"POST",processData:!1,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({title:n,content:e}),complete:function(t){200===t.status&&d()}})}),e.on("change","[data-board-name-select]",function(t){var a=$(t.target),n=a.val(),e=a.siblings("[data-list-name-select]"),s=o(i[n].lists);e.empty().append(s)}),e.on("click","[data-trello-card-creation-trigger]",function(t){var n=$(t.target).parents("[data-task-id]"),e=s[n.attr("data-task-id")],i=n.find("[data-list-name-select]").val();if(!i){alert("You have to select a board and a list first!");return}$.ajax({url:a+"/cards",method:"POST",processData:!1,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({name:e.title,description:e.content,listId:i}),success:function(t){console.log("Card created - "+t.shortUrl),alert("Card created - "+t.shortUrl)}})}),e.on("click","[data-task-edit-button]",c),e.on("click","[data-task-edit-abort-button]",c),e.on("click","[data-task-submit-update-button]",function(){var a=$(this).parents("[data-task-id]"),n=a.attr("data-task-id"),e=a.find("[data-task-name-input]").val(),i=a.find("[data-task-content-input]").val();$.ajax({url:t,method:"PUT",processData:!1,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({id:n,title:e,content:i}),success:function(t){a.attr("data-task-id",t.id).toggleClass("datatable__row--editing"),a.find("[data-task-name-paragraph]").text(e),a.find("[data-task-content-paragraph]").text(i)}})}),e.on("click","[data-task-delete-button]",function(){var a=$(this).parents("[data-task-id]"),n=a.attr("data-task-id");$.ajax({url:t+"/"+n,method:"DELETE",success:function(){a.slideUp(400,function(){a.remove()})}})})});
//# sourceMappingURL=index.ea66097a.js.map
